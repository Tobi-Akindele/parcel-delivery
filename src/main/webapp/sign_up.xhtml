<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="./main_template.xhtml">

    <ui:define name="title">
        Delis: Sign Up
    </ui:define>

    <ui:define name="menu"></ui:define>

    <ui:define name="content">

        <div class="container w-50">
            <h:form id="userSignUpForm">

                <h2 class="mb-4" alt="Site name" width="72" height="57">Delis Parcel Delivery</h2>
                <h1 class="h5 mb-3 fw-normal">Please sign up</h1>

                <h:messages globalOnly="true" errorClass="err" infoClass="info"></h:messages>

                <!--Email--> 
                <div class="mb-3 row">
                    <label for="email" class="col-sm-4 col-form-label">Email <span class="compulsory-fields">*</span>:</label>
                    <div class="col-sm-8">
                        <h:inputText id="email" class="form-control" label="Email Address" 
                                     value="#{signUpRequest.userDto.email}" required="true" requiredMessage="Email is required">
                            <f:validator validatorId="com.tobiakindele.parceldelivery.validators.EmailPatternValidator" />
                        </h:inputText>
                        <h:message for="email" style="color:red" />
                    </div> 
                </div>

                <!-- First name -->
                <div class="mb-3 row">
                    <label for="firstName" class="col-sm-4 col-form-label">First Name <span class="compulsory-fields">*</span>:</label>
                    <div class="col-sm-8">
                        <h:inputText id="firstName" class="form-control" label="First Name" 
                                     value="#{signUpRequest.userDto.firstName}" required="true" requiredMessage="First name is required">
                            <f:validator validatorId="com.tobiakindele.parceldelivery.validators.NotNullValidator" />
                        </h:inputText> 
                        <h:message for="firstName" style="color:red" />
                    </div>
                </div>

                <!-- Last name -->
                <div class="mb-3 row">
                    <label for="lastName" class="col-sm-4 col-form-label">Last Name <span class="compulsory-fields">*</span>:</label>
                    <div class="col-sm-8">
                        <h:inputText id="lastName" class="form-control" label="Last Name" 
                                     value="#{signUpRequest.userDto.lastName}" required="true" requiredMessage="Last name is required">
                            <f:validator validatorId="com.tobiakindele.parceldelivery.validators.NotNullValidator" />
                        </h:inputText>
                        <h:message for="lastName" style="color:red" />
                    </div>
                </div>

                <!-- Date of Birth -->
                <div class="row mb-3">
                    <label for="dateOfBirth" class="col-sm-4 col-form-label">Date of Birth :</label>
                    <div class="col-sm-8" id="datepicker">
                        <h:inputText id="dateOfBirth" styleClass="form-control input-group datepicker" label="Date of Birth" 
                                     value="#{signUpRequest.userDto.dateOfBirth}" 
                                     converter="dateConverter"
                                     converterMessage="Date failed to convert" />
                    </div>
                </div>

                <!-- Address -->
                <div class="row mb-3">
                    <label for="street" class="col-sm-4">Street <span class="compulsory-fields">*</span>:</label>
                    <div class="col-sm-8">
                        <h:inputText id="street" class="form-control" label="Street" 
                                     value="#{signUpRequest.userDto.address.street}" required="true" requiredMessage="Street is required">
                            <f:validator validatorId="com.tobiakindele.parceldelivery.validators.NotNullValidator" />
                        </h:inputText>
                        <h:message for="street" style="color:red" />
                    </div>
                </div>

                <div class="row mb-3">
                    <label for="city" class="col-sm-4">City <span class="compulsory-fields">*</span>:</label>
                    <div class="col-sm-8">
                        <h:inputText id="city" class="form-control" label="City" 
                                     value="#{signUpRequest.userDto.address.city}" required="true" requiredMessage="City is required">
                            <f:validator validatorId="com.tobiakindele.parceldelivery.validators.NotNullValidator" />
                        </h:inputText>
                        <h:message for="city" style="color:red" />
                    </div>
                </div>

                <div class="row mb-3">
                    <label for="postCode" class="col-sm-4">Post Code <span class="compulsory-fields">*</span>:</label>
                    <div class="col-sm-8">
                        <h:inputText id="postCode" class="form-control" label="Post Code" 
                                     value="#{signUpRequest.userDto.address.postCode}" required="true" requiredMessage="Post code is required">
                            <f:validator validatorId="com.tobiakindele.parceldelivery.validators.PostcodeValidator" />
                        </h:inputText>
                        <h:message for="postCode" style="color:red" />
                    </div>
                </div>

                <!-- Password -->
                <div class="row mb-3">
                    <label for="password" class="col-sm-4">Password <span class="compulsory-fields">*</span>:</label>
                    <div class="col-sm-8">
                        <h:inputSecret id="password" class="form-control" label="Password" 
                                       value="#{signUpRequest.userDto.password}" required="true" requiredMessage="Password is required">
                            <f:validator validatorId="com.tobiakindele.parceldelivery.validators.PasswordPatternValidator" />
                        </h:inputSecret>
                        <h:message for="password" style="color:red" />
                    </div>
                </div>

                <!--Confirm Password-->
                <div class="row mb-3">
                    <label for="confirmPassword" class="col-sm-4">Confirm Password <span class="compulsory-fields">*</span>:</label>
                    <div class="col-sm-8">
                        <h:inputSecret id="confirmPassword" class="form-control" label="Confirm Password" 
                                       value="#{signUpRequest.userDto.confirmPassword}" required="true" requiredMessage="Confirm password is required">
                            <f:validator validatorId="com.tobiakindele.parceldelivery.validators.PasswordPatternValidator" />
                        </h:inputSecret>
                        <h:message for="confirmPassword" style="color:red" />
                    </div>
                </div>


                <div class="row d-grid gap-2 d-md-flex justify-content-md-end mb-3">
                    <h:commandButton value="Submit" styleClass="w-25 btn btn-primary" action="#{signUpRequest.registerUser()}" />
                </div>

                <div class="row">
                    <h:link outcome="login">
                        Already have account? Login.
                    </h:link>
                </div>

            </h:form>

            <div id="message">
                <div class="container">
                    <div class="row left">
                        <span>Password should contain the following:</span>
                        <span id="letter" class="invalid">At least <b>lowercase</b> letter</span><br />
                        <span id="capital" class="invalid">At least <b>capital (uppercase)</b> letter</span><br />
                        <span id="number" class="invalid">At least <b>number</b></span><br />
                        <span id="length" class="invalid">Minimum <b>8 characters</b></span><br />
                    </div>

                    <div class="row right">
                        <span id="passwordMatch" class="invalid"><b>Confirm password</b> match</span>
                    </div>
                </div>

            </div>

        </div>

    </ui:define>

</ui:composition>
